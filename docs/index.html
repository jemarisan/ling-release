<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Ling - AI Life Rehearsal</title>
  <script>
    (function(){
      var v = '2026022300';
      var k = 'ling_site_v';
      try {
        var old = sessionStorage.getItem(k);
        if (old && old !== v) {
          sessionStorage.setItem(k, v);
          location.replace(location.pathname + '?_t=' + Date.now());
          return;
        }
        sessionStorage.setItem(k, v);
      } catch(e) {}
      if (!/[?&]_t=/.test(location.search)) {
        var ua = navigator.userAgent.toLowerCase();
        if (/micromessenger|qq\/|weibo|dingtalk/.test(ua)) {
          location.replace(location.pathname + '?_t=' + Date.now());
        }
      }
    })();
  </script>
  <style>
    :root {
      --primary: #7C6AFF;
      --primary-dim: rgba(124,106,255,0.15);
      --bg: #0A0A0A;
      --surface: #151515;
      --surface2: #1C1C1C;
      --text: #E8E8E8;
      --text2: #999999;
      --text3: #555555;
      --border: #2A2A2A;
      --radius: 14px;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "PingFang SC", "Hiragino Sans GB", sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    /* -- Layout -- */
    .container { max-width: 720px; margin: 0 auto; padding: 48px 24px 32px; }

    /* -- Top bar -- */
    .top-bar { display: flex; justify-content: flex-end; align-items: center; gap: 8px; margin-bottom: 48px; }
    .lang-btn {
      font-size: 13px; color: var(--text3); background: none; border: 1px solid var(--border);
      padding: 5px 14px; border-radius: 20px; cursor: pointer; transition: all 0.2s; text-decoration: none;
    }
    .lang-btn:hover, .lang-btn.active { color: var(--primary); border-color: var(--primary); }
    .gh-link {
      display: inline-flex; align-items: center; gap: 6px;
      font-size: 13px; color: var(--text3); text-decoration: none; padding: 5px 14px;
      border: 1px solid var(--border); border-radius: 20px; transition: all 0.2s;
    }
    .gh-link:hover { color: var(--text2); border-color: var(--text2); }
    .gh-link svg { width: 16px; height: 16px; fill: currentColor; }

    /* -- Hero -- */
    .hero { text-align: center; margin-bottom: 56px; }
    .hero h1 { font-size: 56px; font-weight: 800; letter-spacing: -1px; margin-bottom: 12px; }
    .hero h1 span { background: linear-gradient(135deg, var(--primary), #A78BFA); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .hero .subtitle { font-size: 20px; color: var(--text2); line-height: 1.6; margin-bottom: 8px; }
    .hero .tagline { font-size: 14px; color: var(--text3); letter-spacing: 3px; margin-top: 16px; }

    /* -- Downloads -- */
    .downloads { display: flex; flex-direction: column; gap: 10px; margin-bottom: 56px; }
    .dl-btn {
      display: flex; align-items: center; gap: 14px;
      padding: 16px 20px; background: var(--surface); border: 1px solid var(--border);
      border-radius: var(--radius); text-decoration: none; color: var(--text); transition: all 0.2s;
    }
    .dl-btn:hover { background: var(--surface2); border-color: var(--text3); }
    .dl-btn .icon { width: 28px; height: 28px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
    .dl-btn .icon svg { width: 24px; height: 24px; fill: var(--text2); }
    .dl-btn .info { flex: 1; }
    .dl-btn .platform { font-size: 16px; font-weight: 600; }
    .dl-btn .note { font-size: 12px; color: var(--text3); margin-top: 2px; }
    .dl-btn .badge {
      font-size: 12px; font-weight: 500; color: var(--primary);
      border: 1px solid var(--primary); padding: 4px 14px; border-radius: 20px; white-space: nowrap;
    }

    /* -- Features -- */
    .features { margin-bottom: 56px; }
    .features h2 { font-size: 20px; font-weight: 700; margin-bottom: 20px; }
    .feature-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 520px) { .feature-grid { grid-template-columns: 1fr; } }
    .feature-card {
      padding: 20px; background: var(--surface); border: 1px solid var(--border);
      border-radius: var(--radius); transition: border-color 0.2s;
    }
    .feature-card:hover { border-color: var(--text3); }
    .feature-card h3 { font-size: 15px; font-weight: 600; margin-bottom: 8px; }
    .feature-card p { font-size: 13px; color: var(--text2); line-height: 1.6; }

    /* -- Privacy banner -- */
    .privacy-banner {
      text-align: center; padding: 24px; background: var(--primary-dim);
      border: 1px solid rgba(124,106,255,0.25); border-radius: var(--radius); margin-bottom: 56px;
    }
    .privacy-banner p { font-size: 14px; color: var(--text2); line-height: 1.7; }
    .privacy-banner strong { color: var(--text); }

    /* -- Footer -- */
    footer { text-align: center; padding: 24px 0; border-top: 1px solid var(--border); }
    footer .links { display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; margin-bottom: 12px; }
    footer a { color: var(--text3); text-decoration: none; font-size: 13px; transition: color 0.2s; }
    footer a:hover { color: var(--text2); }
    footer .copy { color: var(--text3); font-size: 12px; }

    /* -- i18n -- */
    [data-lang] { display: none; }
    [data-lang].active { display: block; }
    span[data-lang].active { display: inline; }

    /* -- In-app browser overlay -- */
    .browser-guide {
      display: none; position: fixed; inset: 0; z-index: 9999;
      background: rgba(0,0,0,0.88); flex-direction: column; align-items: flex-end;
      padding: 24px 24px 0;
    }
    .browser-guide.active { display: flex; }
    .browser-guide .arrow {
      width: 60px; height: 60px; margin-right: 12px; margin-bottom: 16px;
      animation: bounce 1.6s ease infinite;
    }
    .browser-guide .arrow svg { width: 100%; height: 100%; }
    @keyframes bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    .browser-guide .guide-body {
      width: 100%; text-align: center; margin-top: 40px;
      display: flex; flex-direction: column; align-items: center; gap: 16px;
    }
    .browser-guide .guide-title {
      font-size: 20px; font-weight: 700; color: #fff; line-height: 1.5;
    }
    .browser-guide .guide-steps {
      font-size: 15px; color: #ccc; line-height: 2;
    }
    .browser-guide .guide-steps strong { color: #fff; }
    .browser-guide .guide-dismiss {
      margin-top: 32px; font-size: 13px; color: #666;
      background: none; border: 1px solid #444; border-radius: 20px;
      padding: 8px 28px; cursor: pointer;
    }
    .browser-guide .guide-dismiss:active { background: #222; }
  </style>
</head>
<body>
  <div class="container">
    <!-- Top bar: GitHub + Language -->
    <div class="top-bar">
      <a class="gh-link" href="https://github.com/jemarisan/ling-release" target="_blank" rel="noopener">
        <svg viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
        GitHub
      </a>
      <a class="lang-btn" id="btn-zh" onclick="switchLang('zh')">中文</a>
      <a class="lang-btn" id="btn-en" onclick="switchLang('en')">EN</a>
    </div>

    <!-- Hero -->
    <div class="hero">
      <h1><span>Ling</span></h1>
      <p class="subtitle" data-lang="zh" class="active">AI 驱动的人生排练场</p>
      <p class="subtitle" data-lang="en">AI-Powered Life Rehearsal</p>
      <div class="tagline">百灵懂你，灵卡相见</div>
    </div>

    <!-- Downloads: Android/macOS links filled by GitHub API for direct download -->
    <div class="downloads">
      <p class="version-label" id="release-version" style="display:none; font-size: 12px; color: var(--text3); margin-bottom: 8px;"></p>
      <a class="dl-btn" href="https://apps.apple.com/app/id6759032853">
        <div class="icon">
          <svg viewBox="0 0 24 24"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.8-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>
        </div>
        <div class="info">
          <div class="platform">iOS / iPadOS</div>
          <div class="note">iOS 16.0+</div>
        </div>
        <span class="badge">App Store</span>
      </a>
      <a class="dl-btn" id="dl-android" href="https://github.com/jemarisan/ling-release/releases/latest" data-fallback="https://github.com/jemarisan/ling-release/releases/latest">
        <div class="icon">
          <svg viewBox="0 0 24 24"><path d="M17.6 9.48l1.84-3.18c.16-.31.04-.69-.26-.85-.29-.15-.65-.06-.83.22l-1.88 3.24a11.463 11.463 0 00-8.94 0L5.65 5.67c-.19-.29-.58-.38-.87-.2-.28.18-.37.54-.22.83L6.4 9.48A10.78 10.78 0 002 18h20a10.78 10.78 0 00-4.4-8.52zM7 15.25a1.25 1.25 0 110-2.5 1.25 1.25 0 010 2.5zm10 0a1.25 1.25 0 110-2.5 1.25 1.25 0 010 2.5z"/></svg>
        </div>
        <div class="info">
          <div class="platform">Android</div>
          <div class="note">Android 5.0+</div>
        </div>
        <span class="badge">APK</span>
      </a>
      <a class="dl-btn" id="dl-macos" href="https://github.com/jemarisan/ling-release/releases/latest" data-fallback="https://github.com/jemarisan/ling-release/releases/latest">
        <div class="icon">
          <svg viewBox="0 0 24 24"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.8-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>
        </div>
        <div class="info">
          <div class="platform">macOS</div>
          <div class="note">macOS 13.0+</div>
        </div>
        <span class="badge">DMG</span>
      </a>
    </div>

    <!-- Features (zh) -->
    <div class="features" data-lang="zh">
      <h2>核心功能</h2>
      <div class="feature-grid">
        <div class="feature-card">
          <h3>灵卡 -- 人相卡</h3>
          <p>描述真实的人。AI 化身为他们 -- 性格、说话风格，一比一还原。</p>
        </div>
        <div class="feature-card">
          <h3>灵卡 -- 对白卡</h3>
          <p>练习高风险对话。辞职、谈判、表白 -- 反复排练直到准备好。</p>
        </div>
        <div class="feature-card">
          <h3>AI 好友</h3>
          <p>微信式社交体验。你的 AI 好友记住一切，和你一起成长。</p>
        </div>
        <div class="feature-card">
          <h3>本地优先</h3>
          <p>对话记录 100% 存储在本地。AI 回复由第三方模型直连生成，我们不经手你的数据。</p>
        </div>
      </div>
    </div>

    <!-- Features (en) -->
    <div class="features" data-lang="en">
      <h2>Core Features</h2>
      <div class="feature-grid">
        <div class="feature-card">
          <h3>Persona LingCard</h3>
          <p>Describe real people. AI becomes them -- personality, speaking style, and all.</p>
        </div>
        <div class="feature-card">
          <h3>Script LingCard</h3>
          <p>Practice tough conversations. Resign, negotiate, confess -- rehearse until ready.</p>
        </div>
        <div class="feature-card">
          <h3>AI Friends</h3>
          <p>WeChat-style social. Your AI friends remember everything and grow with you.</p>
        </div>
        <div class="feature-card">
          <h3>Local-First</h3>
          <p>Chat history is 100% stored locally. AI replies are generated directly by third-party models -- we never touch your data.</p>
        </div>
      </div>
    </div>

    <!-- Privacy banner -->
    <div class="privacy-banner">
      <p data-lang="zh">
        <strong>对话记录 100% 本地存储。</strong><br>
        AI 回复由你选择的第三方模型直连生成。我们没有后端服务器，不经手、不存储、不查看你的任何数据。
      </p>
      <p data-lang="en">
        <strong>Chat history is 100% stored on your device.</strong><br>
        AI replies are generated directly by the third-party model you choose. We have no backend servers -- we never intercept, store, or view your data.
      </p>
    </div>

    <!-- Footer -->
    <footer>
      <div class="links">
        <a href="privacy.html">
          <span data-lang="zh">隐私政策</span>
          <span data-lang="en">Privacy Policy</span>
        </a>
        <a href="terms.html">
          <span data-lang="zh">使用条款</span>
          <span data-lang="en">Terms of Use</span>
        </a>
        <a href="https://github.com/jemarisan/ling-release" target="_blank" rel="noopener">GitHub</a>
        <a href="mailto:jemarisan@gmail.com">
          <span data-lang="zh">联系我们</span>
          <span data-lang="en">Contact</span>
        </a>
      </div>
      <p class="copy">(c) 2026 JEMARISAN. All rights reserved. <span style="margin-left:8px;opacity:0.5">site v2026.0223.0</span></p>
    </footer>
  </div>

  <!-- In-app browser guide overlay -->
  <div class="browser-guide" id="browser-guide">
    <div class="arrow">
      <svg viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M30 52V12" stroke="white" stroke-width="3" stroke-linecap="round"/>
        <path d="M16 24L30 10L44 24" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
        <circle cx="30" cy="6" r="3" fill="white"/>
      </svg>
    </div>
    <div class="guide-body">
      <div class="guide-title" data-lang="zh">请在浏览器中打开</div>
      <div class="guide-title" data-lang="en">Open in Browser</div>
      <div class="guide-steps" data-lang="zh">
        1. 点击右上角 <strong>...</strong> 菜单<br>
        2. 选择 <strong>「在浏览器中打开」</strong><br>
        3. 即可正常下载安装
      </div>
      <div class="guide-steps" data-lang="en">
        1. Tap <strong>...</strong> in the top right<br>
        2. Select <strong>"Open in Browser"</strong><br>
        3. Then download normally
      </div>
      <button class="guide-dismiss" onclick="document.getElementById('browser-guide').classList.remove('active')">
        <span data-lang="zh">我知道了</span>
        <span data-lang="en">Got it</span>
      </button>
    </div>
  </div>

  <script>
    function switchLang(lang) {
      document.querySelectorAll('[data-lang]').forEach(function(el) {
        el.classList.toggle('active', el.getAttribute('data-lang') === lang);
      });
      document.getElementById('btn-zh').classList.toggle('active', lang === 'zh');
      document.getElementById('btn-en').classList.toggle('active', lang === 'en');
      try { localStorage.setItem('ling-lang', lang); } catch(e) {}
    }
    (function() {
      var saved = null;
      try { saved = localStorage.getItem('ling-lang'); } catch(e) {}
      if (saved) { switchLang(saved); return; }
      var browserLang = (navigator.language || '').toLowerCase();
      switchLang(browserLang.startsWith('zh') ? 'zh' : 'en');
    })();

    (function() {
      var giteeOwner = 'dislab_io';
      var giteeRepo = 'ling-release';
      var githubOwner = 'jemarisan';
      var githubRepo = 'ling-release';
      var giteeApi = 'https://gitee.com/api/v5/repos/' + giteeOwner + '/' + giteeRepo + '/releases/latest';
      var githubApi = 'https://api.github.com/repos/' + githubOwner + '/' + githubRepo + '/releases/latest';
      var giteeFallback = 'https://gitee.com/' + giteeOwner + '/' + giteeRepo + '/releases/latest';
      var githubFallback = 'https://github.com/' + githubOwner + '/' + githubRepo + '/releases/latest';

      function isChina() {
        try {
          var tz = Intl.DateTimeFormat().resolvedOptions().timeZone || '';
          if (/^Asia\/(Shanghai|Chongqing|Urumqi|Harbin)$/i.test(tz)) return true;
        } catch(e) {}
        var lang = (navigator.language || '').toLowerCase();
        return lang === 'zh-cn' || lang === 'zh';
      }

      var cn = isChina();
      var primaryApi = cn ? giteeApi : githubApi;
      var secondaryApi = cn ? githubApi : giteeApi;
      var primaryFallback = cn ? giteeFallback : githubFallback;
      var primaryHeaders = cn ? {} : { 'Accept': 'application/vnd.github.v3+json' };
      var secondaryHeaders = cn ? { 'Accept': 'application/vnd.github.v3+json' } : {};

      function setFallback(btn) {
        if (!btn || (btn.href && btn.href !== '#' && !btn.href.endsWith('/'))) return;
        btn.href = primaryFallback;
      }

      function applyRelease(data) {
        var tag = data.tag_name || '';
        var assets = data.assets || [];
        var versionEl = document.getElementById('release-version');
        if (tag && versionEl) {
          var prefix = (document.documentElement.lang === 'zh-CN') ? '当前版本 ' : 'Current version ';
          versionEl.textContent = prefix + tag;
          versionEl.style.display = 'block';
        }
        var androidBtn = document.getElementById('dl-android');
        var macosBtn = document.getElementById('dl-macos');
        assets.forEach(function(a) {
          var name = (a.name || '').toLowerCase();
          var url = a.browser_download_url;
          if (!url) return;
          if (name.endsWith('-android.apk')) androidBtn.href = url;
          else if (name.endsWith('-macos.dmg')) macosBtn.href = url;
        });
        setFallback(androidBtn);
        setFallback(macosBtn);
      }

      function trySecondary() {
        fetch(secondaryApi, { headers: secondaryHeaders })
          .then(function(r) { return r.ok ? r.json() : Promise.reject(); })
          .then(applyRelease)
          .catch(function() {
            var ab = document.getElementById('dl-android');
            var mb = document.getElementById('dl-macos');
            if (ab) ab.href = primaryFallback;
            if (mb) mb.href = primaryFallback;
          });
      }

      fetch(primaryApi, { headers: primaryHeaders })
        .then(function(r) { return r.ok ? r.json() : Promise.reject(); })
        .then(applyRelease)
        .catch(trySecondary);
    })();

    (function() {
      var ua = navigator.userAgent.toLowerCase();
      var restricted = /micromessenger|qq\/|weibo|dingtalk|alipayclient|bytedancewebview|toutiao|douyin/.test(ua);
      if (restricted) {
        document.getElementById('browser-guide').classList.add('active');
      }
    })();
  </script>
</body>
</html>
